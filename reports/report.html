<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head>
  <script src="lib/d3.v3.min.js"></script>
<link href="lib/nv.d3.min.css" rel="stylesheet">
<script src="lib/nv.d3.min.js"></script>

    <style>
        text {
            font: 12px sans-serif;
        }
        svg {
            display: block;
        }
        html, body, #chart1, svg {
            margin: 0px;
            padding: 0px;
            height: 100%;
            width: 100%;
        }
        .dashed {
            stroke-dasharray: 5,5;
        }
    </style>
</head>

<body class='with-3d-shadow with-transitions'>

<div id="chart1"></div>

<script>
    // Wrapping in nv.addGraph allows for '0 timeout render', stores rendered charts in nv.graphs, and may do more in the future... it's NOT required
    var chart;
    var data;
    var randomizeFillOpacity = function() {
        var rand = Math.random(0,1);
        for (var i = 0; i < 100; i++) { // modify sine amplitude
            data[4].values[i].y = Math.sin(i/(5 + rand)) * .4 * rand - .25;
        }
        data[4].fillOpacity = rand;
        chart.update();
    };
    nv.addGraph(function() {
        chart = nv.models.lineChart()
            .options({
                transitionDuration: 300,
                useInteractiveGuideline: true
            })
        ;
        // chart sub-models (ie. xAxis, yAxis, etc) when accessed directly, return themselves, not the parent chart, so need to chain separately
        chart.xAxis
            .axisLabel("Date")
            //.tickFormat(d3.format(',.1f'))
            .tickFormat(
              function(d) {
                  // Will Return the date, as "%m/%d/%Y"(08/06/13)
                  return d3.time.format('%d/%m/%y %H:%M')(new Date(d))
              }
            )
            .staggerLabels(true)
        ;
        chart.yAxis
            .axisLabel('Energy (kw)')
            .tickFormat(function(d) {
                if (d == null) {
                    return 'N/A';
                }
                return d3.format(',.4f')(d);
            })
        ;
        data = dades();


        d3.select('#chart1').append('svg')
            .datum(data)
            .call(chart);
        nv.utils.windowResize(chart.update);
        return chart;
    });


    function dades() {

        var
valors = [[2016, 12, 29, 0, 1.15], [2016, 12, 29, 1, 1.15], [2016, 12, 29, 2, 1.15], [2016, 12, 29, 3, 1.15], [2016, 12, 29, 4, 1.15], [2016, 12, 29, 5, 0.575], [2016, 12, 29, 6, 1.15], [2016, 12, 29, 7, 1.15], [2016, 12, 29, 8, 1.15], [2016, 12, 29, 9, 0.575], [2016, 12, 29, 10, 0.575], [2016, 12, 29, 11, 0.575], [2016, 12, 29, 12, 0.575], [2016, 12, 29, 13, 0.0], [2016, 12, 29, 14, 0.0], [2016, 12, 29, 15, 0.0], [2016, 12, 29, 16, 0.0], [2016, 12, 29, 17, 0.0], [2016, 12, 29, 18, 0.0], [2016, 12, 29, 19, 0.0], [2016, 12, 29, 20, 0.0], [2016, 12, 29, 21, 0.0], [2016, 12, 29, 22, 0.0], [2016, 12, 29, 23, 1.15], [2016, 12, 30, 0, 1.15], [2016, 12, 30, 1, 1.15], [2016, 12, 30, 2, 1.15], [2016, 12, 30, 3, 1.15], [2016, 12, 30, 4, 1.15], [2016, 12, 30, 5, 0.575], [2016, 12, 30, 6, 1.15], [2016, 12, 30, 7, 1.15], [2016, 12, 30, 8, 1.15], [2016, 12, 30, 9, 0.575], [2016, 12, 30, 10, 0.575], [2016, 12, 30, 11, 0.575], [2016, 12, 30, 12, 0.575], [2016, 12, 30, 13, 0.0], [2016, 12, 30, 14, 0.0], [2016, 12, 30, 15, 0.0], [2016, 12, 30, 16, 0.0], [2016, 12, 30, 17, 0.0], [2016, 12, 30, 18, 0.0], [2016, 12, 30, 19, 0.0], [2016, 12, 30, 20, 0.0], [2016, 12, 30, 21, 0.0], [2016, 12, 30, 22, 0.0], [2016, 12, 30, 23, 1.15], ],

            passat = [],
            prediccio = []
            ;

        for (var i = 0; i < valors.length; i++) {
            passat.push({x: new Date(valors[i][0]-1,valors[i][1],valors[i][2],valors[i][3],0), y: valors[i][4] });
            prediccio.push({x: new Date(valors[i][0]-1,valors[i][1],valors[i][2],valors[i][3],0), y: valors[i][4]+(Math.random()) });
        }

        return [
            {
                area: true,
                values: passat,
                key: "Passat",
                color: "#ff7f0e",
                strokeWidth: 2,
                classed: 'dashed'
            },
            {
                area: true,
                values: prediccio,
                key: "PredicciÃ³",
                color: "#2ca02c",
                strokeWidth: 2,
                classed: 'dashed'
            }
        ];
    }
</script>
</body>
</html>