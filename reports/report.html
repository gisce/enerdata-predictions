<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head>
  <script src="lib/d3.v3.min.js"></script>
<link href="lib/nv.d3.min.css" rel="stylesheet">
<script src="lib/nv.d3.min.js"></script>

    <style>
        text {
            font: 12px sans-serif;
        }
        svg {
            display: block;
        }
        html, body, #chart1, svg {
            margin: 0px;
            padding: 0px;
            height: 100%;
            width: 100%;
        }
        .dashed {
            stroke-dasharray: 5,5;
        }
    </style>
</head>

<body class='with-3d-shadow with-transitions'>

<div id="chart1"></div>

<script>
    // Wrapping in nv.addGraph allows for '0 timeout render', stores rendered charts in nv.graphs, and may do more in the future... it's NOT required
    var chart;
    var data;

    nv.addGraph(function() {
        chart = nv.models.lineChart()
            .options({
                transitionDuration: 300,
                useInteractiveGuideline: true
            })
        ;
        // chart sub-models (ie. xAxis, yAxis, etc) when accessed directly, return themselves, not the parent chart, so need to chain separately
        chart.xAxis
            .showMaxMin(false)
            .axisLabel("Date")
            //.tickFormat(d3.format(',.1f'))
            .tickFormat(
              function(d) {
                  // Will Return the date, as "%m/%d/%Y"(08/06/13)
                  return d3.time.format('%d/%m %H:%M')(new Date(d))
              }
            )
            .staggerLabels(true)
        ;
        chart.yAxis
            .axisLabel('Energy (kw)')
            .tickFormat(function(d) {
                if (d == null) {
                    return 'N/A';
                }
                return d3.format(',.4f')(d);
            })
        ;
        data = dades();


        d3.select('#chart1').append('svg')
            .datum(data)
            .call(chart);
        nv.utils.windowResize(chart.update);
        return chart;
    });


    function dades() {

        var
valors = [[2016, 12, 29, 0, 266.225], [2016, 12, 29, 1, 133.4], [2016, 12, 29, 2, 129.375], [2016, 12, 29, 3, 115.0], [2016, 12, 29, 4, 115.575], [2016, 12, 29, 5, 114.425], [2016, 12, 29, 6, 117.875], [2016, 12, 29, 7, 134.55], [2016, 12, 29, 8, 155.825], [2016, 12, 29, 9, 311.075], [2016, 12, 29, 10, 481.275], [2016, 12, 29, 11, 529.575], [2016, 12, 29, 12, 523.25], [2016, 12, 29, 13, 491.625], [2016, 12, 29, 14, 368.0], [2016, 12, 29, 15, 335.8], [2016, 12, 29, 16, 328.325], [2016, 12, 29, 17, 312.225], [2016, 12, 29, 18, 348.45], [2016, 12, 29, 19, 349.025], [2016, 12, 29, 20, 358.8], [2016, 12, 29, 21, 323.15], [2016, 12, 29, 22, 269.675], [2016, 12, 29, 23, 258.175], [2016, 12, 30, 0, 68.425], [2016, 12, 30, 1, 65.55], [2016, 12, 30, 2, 62.1], [2016, 12, 30, 3, 50.025], [2016, 12, 30, 4, 43.125], [2016, 12, 30, 5, 43.7], [2016, 12, 30, 6, 44.275], [2016, 12, 30, 7, 50.6], [2016, 12, 30, 8, 48.3], [2016, 12, 30, 9, 44.85], [2016, 12, 30, 10, 60.375], [2016, 12, 30, 11, 62.1], [2016, 12, 30, 12, 64.975], [2016, 12, 30, 13, 69.0], [2016, 12, 30, 14, 62.675], [2016, 12, 30, 15, 70.15], [2016, 12, 30, 16, 60.95], [2016, 12, 30, 17, 58.65], [2016, 12, 30, 18, 60.95], [2016, 12, 30, 19, 76.475], [2016, 12, 30, 20, 82.8], [2016, 12, 30, 21, 85.1], [2016, 12, 30, 22, 94.875], [2016, 12, 30, 23, 81.075], ],

            passat = [],
            prediccio = []
            ;

        for (var i = 0; i < valors.length; i++) {
        //for (var i = 0; i < 3; i++) {
            passat.push({x: new Date(valors[i][0]-1,valors[i][1],valors[i][2],valors[i][3],0), y: valors[i][4] });
            prediccio.push({x: new Date(valors[i][0]-1,valors[i][1],valors[i][2],valors[i][3],0), y: valors[i][4]+(Math.random()) });
        }

        return [
            {
                area: true,
                values: passat,
                key: "Passat",
                color: "#ff7f0e",
                strokeWidth: 2,
                classed: 'dashed'
            },
            {
                area: true,
                values: prediccio,
                key: "PredicciÃ³",
                color: "#2ca02c",
                strokeWidth: 2,
                classed: 'dashed'
            }
        ];
    }
</script>
</body>
</html>